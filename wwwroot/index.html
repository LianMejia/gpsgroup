<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="./logo_gps.png" />
    <link
      rel="stylesheet"
      href="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.*/style.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/inspire-tree-dom@4.0.6/dist/inspire-tree-light.min.css"
    />
    <link rel="stylesheet" href="/main.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <title>GPS GROUP | Visualizador</title>
  </head>
  <style>
    a {
      color: inherit;
      text-decoration: none;
    }
  </style>

  <body>
    <div id="header" class="border-1 border-bottom border-black">
      <img
        class="logo"
        style="width: 52px; height: 52px"
        src="./logo_gps.png"
        alt="GPS GROUP"
      />
      <span class="title fw-bold">Visualizador</span>
      <button id="login" class="btn" style="visibility: hidden">
        Iniciar sesión
      </button>
    </div>
    <div id="sidebar">
      <div id="tree"></div>
    </div>
    <div id="preview"></div>
    <div id="sidenav" class="collapsed">
      <button id="toggleSidenav" class="btn sidenav-toggle">
        <span class="material-icons">chevron_left</span>
      </button>

      <!-- Sección Atributos -->
      <div class="sidenav-section">
        <div class="section-header" data-section="atributos">
          <span class="material-icons">list_alt</span>
          <h4>Atributos</h4>
          <span class="toggle-icon">▶</span>
        </div>
        <div class="section-content" id="atributos">
          <h3 class="attributes-header">El elemento no tiene atributos</h3>
        </div>
      </div>

      <!-- Sección Fichas Técnicas -->
      <div class="sidenav-section">
        <div class="section-header" data-section="fichas">
          <span class="material-icons">description</span>
          <h4>Fichas Técnicas</h4>
          <span class="toggle-icon">▶</span>
        </div>
        <div class="section-content" id="tree2-container">
          <div id="no-fichas" class="no-content-message">
            No hay fichas técnicas disponibles
          </div>
          <div id="tree2"></div>
          <div id="loadingSpinner" class="spinner"></div>
        </div>
      </div>
    </div>

    <div
      id="modelModal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        border-radius: 8px;
      "
    >
      <div
        style="
          position: relative;
          margin: 50px auto;
          background: #fff;
          width: 80%;
          height: 80%;
          border-radius: 8px;
        "
      >
        <span id="closeModalBtn" class="btn material-icons">close</span>

        <div
          id="viewerContainer"
          style="width: 20%; height: 20%; border-radius: 8px"
        ></div>
      </div>
    </div>

        <!-- Modal personalizado -->
    <div id="customModal" class="resizable" style="display: none; position: fixed; top: 50px; left: 50px; background: white; border: 1px solid #ccc; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); z-index: 1000; width: 800px;">
        <div style="background: #f1f1f1; padding: 10px; cursor: move;">
            <span id="closeCustomModal" style="float: right; cursor: pointer;">×</span>
            <h3 style="margin: 0;">Objetos del Modelo</h3>
        </div>
        <div style="padding: 20px; max-height: 400px; overflow-y: auto;">
            <table id="objectsTable" style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr>
                        <th style="padding: 8px; border-bottom: 1px solid #ccc;">Nombre</th>
                        <th style="padding: 8px; border-bottom: 1px solid #ccc;">Acción</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Las filas se llenarán dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
    <script src="https://unpkg.com/inspire-tree@4.3.1/dist/inspire-tree.js"></script>
    <script src="https://unpkg.com/inspire-tree-dom@4.0.6/dist/inspire-tree-dom.min.js"></script>

    <script src="https://developer.api.autodesk.com/modelderivative/v2/viewers/7.71/viewer3D.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="/main.js" type="module"></script>
  </body>
</html>
